(()=>{"use strict";var e,t={8953:(e,t,n)=>{var r=n(3935),l=n(7294),a=n(9669),o=n.n(a),c=n(2692),i=n(18),u=n(5866);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){c=!0,l=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const d=function(e){var t=e.movieId,n=s((0,l.useState)({}),2),r=n[0],a=n[1],m=s((0,l.useState)(""),2),d=m[0],f=m[1],b=s((0,l.useState)(""),2),v=b[0],h=b[1];(0,l.useEffect)((function(){y()}),[]);var y=function(){o().get("/api/movies?id=".concat(t)).then((function(e){0!==e.data.movies.length?(a(e.data.movies[0]),f(e.data.relative_watch_path)):h("Movie details could not be fetched.")})).catch((function(e){console.error(e),h((0,c.b)(e))}))};return l.createElement("div",null,function(){if(""!==v)return l.createElement("div",{className:"my-3"},l.createElement("span",{className:"border border-danger",style:{color:"red",fontSize:"xx-large"}},v))}(),function(){if(void 0!==r.movie_content)return l.createElement("div",{className:"div-background mt-4 px-0 py-3",style:{backgroundColor:"#1b1b2f",position:"relative",backgroundImage:"linear-gradient(to bottom, rgba(68,68,68,0.91), rgba(17,17,17,0.91)), url(".concat(r.backdrop_path_big,")")}},l.createElement("div",null,l.createElement("div",{className:"row align-items-center justify-content-center",style:{height:"100%"}},l.createElement("div",{className:"col-md-3 col-xs-6"},l.createElement("img",{className:"rounded img-thumbnail",src:r.poster_path_big,width:"100%"})),l.createElement("div",{className:"col-md-6 col-xs-9"},l.createElement("h1",null,r.title),l.createElement("div",{className:"d-flex justify-content-between mt-1",style:{width:"100%"}},r.movie_content.map((function(e){return 0!==e.resolution_width?l.createElement("span",{key:e.created_at,className:"border rounded p-1"},l.createElement("b",null,(t=e.resolution_width)>2e3?"4K":t<=2e3&&t>1500?"HD":t<=1500&&t>0?"HDTV":"")):null;var t})),l.createElement("span",{style:{color:"yellow"}},"IMDB: ",r.imdb_score),l.createElement("span",null,Math.floor(r.duration/60)," mins")),l.createElement("h3",{className:"mt-1"},"Overview"),l.createElement("p",null,r.description),l.createElement("div",{className:"row"},l.createElement("div",{className:"col"},l.createElement("a",{title:"Play",href:"".concat(d).concat(t),className:"btn btn-sm btn-outline-secondary rounded-pill",style:{paddingBottom:4}},l.createElement(i.PlayFillSvg,{style:{color:"#9affde"}}))),l.createElement("div",{className:"col"},l.createElement(u.Z,{movieId:r.id,myList:r.my_list,refreshMyList:y})," "," ",null===r.my_list?"Add to My List":"Remove from My List"))))))}())};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(e){var t,n,r,a,o=e.file,c=e.handleClick,u=e.tab,s=e.children,m=e.nonselectable,d=void 0===m?[]:m,f=e.paddingLeft,v=void 0===f?30:f,y=(r=(0,l.useState)({}),a=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){c=!0,l=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw l}}return a}}(r,a)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(r,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=y[0],E=y[1],S=(0,l.useRef)(null),w=(t=d,n=o.name,!(-1!==t.indexOf(n))),k=!0===o.used?"used-file":"",O=function(){S.current&&E(S.current.checked?{backgroundImage:"linear-gradient(#828282, #68747d)"}:{})},N=function(){w&&(c({obj:o,isSelected:!S.current.checked}),S.current.checked=!S.current.checked,O())};return l.createElement(l.Fragment,null,l.createElement("tr",{onMouseEnter:function(){return O()},onMouseLeave:function(){S.current&&E(S.current.checked?{backgroundImage:"linear-gradient(#787878, #616c74)"}:{})},onClick:function(){return N()},key:o.full_path},l.createElement("th",{className:k,style:b({},p)},w?l.createElement("input",{ref:S,type:"checkbox",onClick:function(){return N()}}):null),l.createElement("td",{className:k,style:b(b({},p),{},{paddingLeft:u*v+v/3}),title:o.name},function(e){var t="";switch(e){case".txt":t=l.createElement(i.FileTextSvg,{width:24,height:24});break;case".mp4":t=l.createElement(i.FilePlaySvg,{width:24,height:24});break;case void 0:t=l.createElement(i.OpenFolderSvg,{width:24,height:24});break;default:t=l.createElement(i.FileEarmarkSvg,{width:24,height:24})}return t}(o.suffix)," ",o.name),l.createElement("td",{className:k,style:b({},p)},o.date),l.createElement("td",{className:k,style:b({},p)},g(o.suffix)),l.createElement("td",{className:k,style:b({},p)},o.size?parseFloat(o.size/1048576).toFixed(2):null)),s)},g=function(e){var t="";switch(e){case".srt":case".vtt":t="Subtitle️";break;case".mp4":case".webm":t="Video";break;case".mkv":t="Raw Video";break;case void 0:t="Folder";break;default:t="File"}return t};const p=function e(t){var n=t.files,r=t.handleClick,a=t.nonselectable,o=void 0===a?[]:a,c=t.tab,i=void 0===c?0:c;return 0===n.length?l.createElement(l.Fragment,null):l.createElement(l.Fragment,null,n.map((function(t){return t.files&&0!==t.files.length?l.createElement(y,{nonselectable:o,key:t.full_path,file:t,tab:i,handleClick:r},l.createElement(e,{nonselectable:o,tab:i+1,files:t.files,handleClick:r})):l.createElement(y,{nonselectable:o,key:t.full_path||"root",file:t,tab:i,handleClick:r})})))};var E=n(2188),S=n(5211),w=n(3987),k=n(1388);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){c=!0,l=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const j=function(e){var t=e.movieId,n=O((0,l.useState)([]),2),r=n[0],a=n[1],i=O((0,l.useState)(!1),2),u=i[0],s=i[1],m=O((0,l.useState)([]),2),d=m[0],f=m[1],b=O((0,l.useState)([]),2),v=b[0],h=b[1],y=O((0,l.useState)([]),2),g=y[0],N=y[1],j=O((0,l.useState)(""),2),x=j[0],A=j[1],I=O((0,l.useState)(""),2),_=I[0],C=I[1];(0,l.useEffect)((function(){D()}),[]);var F,M,T,D=function(){o().get("/panel/api/files?movieId=".concat(t)).then((function(e){0!==e.data.files.length?(a(e.data.files),N(e.data.missing_files),h(e.data.used_files),s(!0)):A("Files could not be fetched.")})).catch((function(e){s(!0),console.error(e),A((0,c.b)(e))}))};return l.createElement("div",{className:"mt-4"},function(){if(""!==_)return l.createElement(k.Z,null,_)}(),function(){if(""!==x)return l.createElement(w.Z,{style:{fontSize:"x-large"}},x)}(),function(){if(0!==g.length)return l.createElement(w.Z,{title:"There are missing files!"},l.createElement("ul",{className:"mt-2"},g.map((function(e){return l.createElement("li",{key:e},l.createElement("span",null,e))}))))}(),l.createElement("div",{className:"container border-bottom"},l.createElement("div",{className:"row py-2",style:{backgroundColor:"rgb(32,36,40)"}},l.createElement("div",{className:"col px-4"},l.createElement("h3",null,"File Manager")),l.createElement("div",{className:"col"},l.createElement("div",{style:{float:"right"}},d.length," selected  ",0!==d.length?l.createElement(E.Z,{title:"Delete the files/folders?",body:(M=(F=[],d.map((function(e){return F.push(e.full_path)})),F).some((function(e){return v.indexOf(e)>=0})),T=l.createElement(l.Fragment,null),M&&(T=l.createElement("div",{className:"border border-danger py-2 px-1 my-3"},l.createElement("b",null,l.createElement("span",{style:{color:"red"}},"You are about to remove a necessary file/folder. This is highly discouraged.")))),l.createElement(l.Fragment,null,l.createElement("div",null,"Deleting files directly form here is not recommended."),T,l.createElement("div",null,l.createElement("b",null,"Selecting folders will delete the folders and everything blongs to those folders.")))),buttonText:"Delete",refFunc:function(){o().post("/panel/api/files",{movieId:t,command:"deleteFiles",files:d},{headers:{"X-CSRFToken":(0,S.m)()}}).then((function(e){console.log(e.data),e.data&&e.data.operation?C(e.data.operation):C(JSON.stringify(e.data)),D(),f([])})).catch((function(e){console.error(e),A((0,c.b)(e))}))},refFuncArgs:{}},l.createElement("button",{className:"btn btn-secondary btn-sm"},"Delete selected")):l.createElement("button",{className:"btn btn-secondary btn-sm disabled"},"Delete selected"))))),l.createElement("table",{className:"table table-hover table-dark table-sm pb-0 mb-0"},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",{scope:"col"},"Select"),l.createElement("th",{scope:"col"},"Name"),l.createElement("th",{scope:"col"},"Date"),l.createElement("th",{scope:"col"},"Type"),l.createElement("th",{scope:"col"},"Size (MB)"))),l.createElement("tbody",null,0!==r.length||u?0!==r.length?l.createElement(p,{nonselectable:[r[0].name],files:r,tab:0,handleClick:function(e){var t=e.obj;if(e.isSelected)f(d.concat(t));else{var n=d,r=n.indexOf(t);r>-1&&n.splice(r,1),f(n.slice())}}}):void 0:l.createElement("tr",null,l.createElement("td",null,"Loading"),l.createElement("td",null,"Loading"),l.createElement("td",null,"Loading"),l.createElement("td",null,"Loading"),l.createElement("td",null,"Loading")))),l.createElement("div",{className:"pt-0 mt-0",style:{float:"right",fontSize:"small"}},l.createElement("span",{className:"used-file"},"Critical files")," -"," ",l.createElement("span",null,"Unused files")))};function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){c=!0,l=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const I=function(e){var t=e.movieId,n=x((0,l.useState)(!1),2),r=n[0],a=n[1],u=x((0,l.useState)(""),2),s=u[0],m=u[1],d=x((0,l.useState)(""),2),f=d[0],b=d[1],v=x((0,l.useState)(!1),2),h=v[0],y=v[1];(0,l.useEffect)((function(){g()}),[]);var g=function(){o().get("/api/continue-movie-list?id=".concat(t)).then((function(e){e.data&&e.data.continue&&e.data.continue.length>0&&a(!0),e.data&&e.data.continue&&0===e.data.continue.length&&a(!1)})).catch((function(e){console.error(e),m((0,c.b)(e))}))},p=function(e){b(""),m(""),o().post("/panel/api/movie-management",{movieId:t,command:e},{headers:{"X-CSRFToken":(0,S.m)()}}).then((function(t){console.log(t.data),t.data&&t.data.operation?b(t.data.operation):b(JSON.stringify(t.data)),g(),"deleteEverything"===e&&(location.href="/panel")})).catch((function(e){console.error(e),m((0,c.b)(e)),g()}))};return l.createElement("div",null,function(){if(""!==s)return l.createElement(w.Z,{style:{fontSize:"x-large"}},s)}(),function(){if(""!==f)return l.createElement(k.Z,null,f)}(),l.createElement("div",{className:"container movie-mng-body px-3"},l.createElement("h3",null,l.createElement(i.GearSvg,{style:{marginBottom:4,marginRight:10}}),"Management tools"),function(){if(r)return l.createElement("div",{className:"row"},l.createElement("hr",null),l.createElement("div",{className:"col"},"This video is listed under continue watching."),l.createElement("div",{className:"col"},l.createElement("button",{onClick:function(){return p("deleteContinue")},className:"btn btn-secondary btn-sm"},"Remove video from continue watching")))}(),l.createElement("div",{className:"row mt-3"},l.createElement("hr",null),l.createElement("div",{className:"col"},l.createElement("p",null,"Remove this movie and everything related to it")),l.createElement("div",{className:"col"},!h&&l.createElement("a",{onClick:function(){return y(!0)}},"Click here to reveal the button."),function(){if(h)return l.createElement(E.Z,{title:"Delete the movie?",body:l.createElement("div",null,l.createElement("span",{style:{fontSize:"large",color:"red"}},"This operation will delete everything related to this movie.",l.createElement("br",null),"This operation cannot be reverted.")),buttonText:"Delete",refFunc:p,refFuncArgs:"deleteEverything"},l.createElement("button",{className:"btn btn-danger btn-sm"},"Delete this movie"))}()))))};var _=function(){return l.createElement("div",{className:"mb-5"},l.createElement(d,{movieId:document.getElementById("root").getAttribute("mid")}),l.createElement(I,{movieId:document.getElementById("root").getAttribute("mid")}),l.createElement(j,{movieId:document.getElementById("root").getAttribute("mid")}))};(0,r.render)(l.createElement(_,null),document.getElementById("root"))}},n={};function r(e){var l=n[e];if(void 0!==l)return l.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,n,l,a)=>{if(!n){var o=1/0;for(s=0;s<e.length;s++){for(var[n,l,a]=e[s],c=!0,i=0;i<n.length;i++)(!1&a||o>=a)&&Object.keys(r.O).every((e=>r.O[e](n[i])))?n.splice(i--,1):(c=!1,a<o&&(o=a));if(c){e.splice(s--,1);var u=l();void 0!==u&&(t=u)}}return t}a=a||0;for(var s=e.length;s>0&&e[s-1][2]>a;s--)e[s]=e[s-1];e[s]=[n,l,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.j=883,(()=>{var e={883:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var l,a,[o,c,i]=n,u=0;if(o.some((t=>0!==e[t]))){for(l in c)r.o(c,l)&&(r.m[l]=c[l]);if(i)var s=i(r)}for(t&&t(n);u<o.length;u++)a=o[u],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(s)},n=self.webpackChunkfrontend=self.webpackChunkfrontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var l=r.O(void 0,[622],(()=>r(8953)));l=r.O(l)})();